extends layout

block content

	style(type="text/css").
		#map-canvas {
			height: 300px;
		}

	div.container
		div.jumbotron
			h1 Map

		input(onclick="javascritp:init()", type="button", value="get init")

		div(id="map-canvas" class="map jumbotron")


	script(src="https://maps.googleapis.com/maps/api/js?key=#{apiKey}")
	script(type="text/javascript").
		function init() {

			function _success(pos) {
				var myLat = new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude);
				console.dir(pos);
				var mapOptions = {
					center: myLat,
					zoom: 18
				};
				var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
				var marker = new google.maps.Marker({
					position: myLat,
					map: map,
					title:"Hello World!"
				});
			}
			function _err(err) {
				console.log(err);
			}
			navigator.geolocation.getCurrentPosition(_success, _err);
		}
		google.maps.event.addDomListener(window, 'load', init);
